<!--
Простой одностраничный сайт-демо: "краник" / имитация майнинга.
Как работает (коротко):
- Клиентская симуляция майнинга: по нажатию "Start mining" накапливаются монеты (в localStorage).
- Кнопка "Claim" — симулирует вывод (ничего реально не отправляет).
- Можно подключить настоящую кошелёк-интеграцию позже (описание внизу).

Как развернуть на GitHub Pages:
1. Создайте новый репозиторий на GitHub (например, `crypto-faucet-demo`).
2. Скопируйте этот файл в корень репозитория под именем index.html (или в папку `docs/`).
3. Запушьте коммит и откройте Settings → Pages → выберите ветку `main` (или `gh-pages`) и папку `/ (root)` или `/docs`.
4. Через минуту сайт будет доступен по адресу https://<your-username>.github.io/<repo>.

Важно (безопасность и легальность):
- Этот код **не** производит реальные выплаты и не подключается к blockchain. Если хотите интегрироваться с реальными выплатами — используйте тестовые сети (Ropsten/Goerli и т.д.), серьёзную валидацию, лимиты, защиту от ботов и систему KYC/AML, и получите юридическую консультацию.
- Я могу добавить серверную часть (Node.js + базa данных) для реальных выплат — скажите, хотите ли.
-->

<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Краник / Майнер — Demo</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#10b981;--muted:#9aa6b2}
    body{margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;background:linear-gradient(180deg,#071024 0%,#071633 100%);color:#e6eef6;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .wrap{width:100%;max-width:900px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    h1{font-size:20px;margin:0}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(2,6,23,0.6)}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:16px}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    button{background:var(--accent);color:#052018;border:0;padding:10px 12px;border-radius:8px;font-weight:600;cursor:pointer}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    .meter{height:12px;background:rgba(255,255,255,0.04);border-radius:8px;overflow:hidden}
    .meter > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#38bdf8);width:0%}
    .small{font-size:13px;color:var(--muted)}
    .center{text-align:center}
    .log{max-height:180px;overflow:auto;padding:8px;background:rgba(255,255,255,0.02);border-radius:8px;font-family:monospace;font-size:13px}
    footer{margin-top:12px;color:var(--muted);font-size:13px}
    @media (max-width:800px){.grid{grid-template-columns:1fr;}.card{padding:14px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Crypto Faucet / Miner — Demo</h1>
      <div class="small">Демо — только для тестирования</div>
    </header>

    <div class="grid">
      <div class="card">
        <h2>Майнинг (симуляция)</h2>
        <p class="small">Нажмите <strong>Start mining</strong> — баланс будет нарастать с течением времени.</p>
        <div style="display:flex;align-items:center;gap:12px;margin-top:12px;margin-bottom:8px">
          <div style="flex:1">
            <div style="font-size:28px;font-weight:700" id="balance">0.0000 DEMO</div>
            <div class="small">Адрес (локально): <span id="addr">—</span></div>
          </div>
          <div style="text-align:right">
            <div class="controls">
              <button id="startBtn">Start mining</button>
              <button class="secondary" id="stopBtn">Stop</button>
              <button class="secondary" id="claimBtn">Claim</button>
            </div>
          </div>
        </div>

        <div style="margin-top:8px">
          <div class="small">Процесс майнинга</div>
          <div class="meter" style="margin-top:6px"><i id="meterFill"></i></div>
        </div>

        <section style="margin-top:12px">
          <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
            <div class="small">Скорость: <strong id="rate">0.0005</strong> DEMO/s</div>
            <div class="small">Последний клейм: <span id="lastClaim">—</span></div>
          </div>
        </section>

        <section style="margin-top:12px">
          <div class="small">Лог действий</div>
          <div class="log" id="log">Готово — сайт загружен.</div>
        </section>

        <footer>
          <div>Для реального крана нужна серверная логика (антифрод, база, кошелёк). Спросите — добавлю пример на Node.js.</div>
        </footer>
      </div>

      <div class="card">
        <h3 class="center">Панель управления</h3>
        <div style="margin-top:8px">
          <div class="small">Адрес кошелька (локально):</div>
          <input id="walletInput" placeholder="demo-wallet-123" style="width:100%;padding:8px;margin-top:6px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit">
        </div>

        <div style="margin-top:12px;display:flex;gap:8px">
          <button id="saveAddr">Save</button>
          <button class="secondary" id="resetBtn">Reset</button>
        </div>

        <hr style="margin:12px 0;border:0;border-top:1px solid rgba(255,255,255,0.04)">

        <div>
          <div class="small">Настройки симуляции</div>
          <div style="margin-top:8px;display:flex;gap:8px;align-items:center">
            <label class="small">Rate</label>
            <input id="rateInput" type="number" step="0.0001" value="0.0005" style="flex:1;padding:6px;border-radius:6px;background:transparent;border:1px solid rgba(255,255,255,0.04)">
          </div>

          <div style="margin-top:8px;display:flex;gap:8px">
            <button id="apply">Apply</button>
            <button class="secondary" id="faucetGive">Give small faucet</button>
          </div>
        </div>

        <hr style="margin:12px 0;border:0;border-top:1px solid rgba(255,255,255,0.04)">

        <div>
          <div class="small">Интеграции (опционально)</div>
          <ul class="small" style="padding-left:18px;margin-top:6px;color:var(--muted)">
            <li>Web3 (MetaMask) — только для чтения / отправки транзакций (потребуется backend)</li>
            <li>Фэйковые выплаты — можно хранить историю в localStorage</li>
            <li>Реальные выплаты — нужна серверная подпись и контролируемая очередь выплат</li>
          </ul>
        </div>

      </div>
    </div>
  </div>

  <script>
    // Простая клиентская логика — всё хранится в localStorage
    const BAL_KEY = 'demo_balance_v1';
    const ADDR_KEY = 'demo_addr_v1';
    const LASTCLAIM_KEY = 'demo_lastclaim_v1';

    const balanceEl = document.getElementById('balance');
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    const claimBtn = document.getElementById('claimBtn');
    const meter = document.getElementById('meterFill');
    const rateEl = document.getElementById('rate');
    const rateInput = document.getElementById('rateInput');
    const logEl = document.getElementById('log');
    const addrEl = document.getElementById('addr');
    const walletInput = document.getElementById('walletInput');
    const saveAddr = document.getElementById('saveAddr');
    const resetBtn = document.getElementById('resetBtn');
    const applyBtn = document.getElementById('apply');
    const faucetGive = document.getElementById('faucetGive');
    const lastClaimEl = document.getElementById('lastClaim');

    let mining = false;
    let minerInterval = null;
    let meterProgress = 0;

    function log(msg){
      const time = new Date().toLocaleTimeString();
      logEl.innerText = `[${time}] ${msg}\n` + logEl.innerText;
    }

    function getBalance(){
      return parseFloat(localStorage.getItem(BAL_KEY) || '0');
    }
    function setBalance(v){
      localStorage.setItem(BAL_KEY, v.toFixed(4));
      render();
    }

    function render(){
      balanceEl.innerText = getBalance().toFixed(4) + ' DEMO';
      const addr = localStorage.getItem(ADDR_KEY) || '—';
      addrEl.innerText = addr;
      const last = localStorage.getItem(LASTCLAIM_KEY) || '—';
      lastClaimEl.innerText = last;
      meter.style.width = Math.min(100, meterProgress) + '%';
      rateEl.innerText = parseFloat(localStorage.getItem('demo_rate') || rateInput.value).toFixed(4);
    }

    startBtn.addEventListener('click', ()=>{
      if(mining) return; mining = true;
      log('Майнинг запущен.');
      minerInterval = setInterval(()=>{
        const rate = parseFloat(localStorage.getItem('demo_rate') || rateInput.value) || 0.0005;
        const bal = getBalance() + rate;
        setBalance(bal);
        meterProgress = (meterProgress + 2) % 100;
        render();
      }, 1000);
    });

    stopBtn.addEventListener('click', ()=>{
      if(!mining) return; mining = false;
      clearInterval(minerInterval); minerInterval = null; meterProgress = 0; render();
      log('Майнинг остановлен.');
    });

    claimBtn.addEventListener('click', ()=>{
      const bal = getBalance();
      if(bal < 0.001){ alert('Недостаточно средств для клейма (min 0.001 DEMO).'); return; }
      // Симуляция: обнуляем баланс и записываем время последнего клейма
      localStorage.setItem(LASTCLAIM_KEY, new Date().toLocaleString());
      setBalance(0);
      meterProgress = 0; render();
      log('Claim processed (симуляция). История выплат хранится локально.');
    });

    saveAddr.addEventListener('click', ()=>{
      const v = walletInput.value.trim();
      if(!v){alert('Введите адрес');return}
      localStorage.setItem(ADDR_KEY, v);
      render();
      log('Адрес сохранён: ' + v);
    });

    resetBtn.addEventListener('click', ()=>{
      if(!confirm('Сбросить все локальные данные?')) return;
      localStorage.removeItem(BAL_KEY); localStorage.removeItem(ADDR_KEY); localStorage.removeItem(LASTCLAIM_KEY);
      render(); log('Локальные данные сброшены.');
    });

    applyBtn.addEventListener('click', ()=>{
      const r = parseFloat(rateInput.value) || 0.0005; localStorage.setItem('demo_rate', r); render(); log('Скорость майнинга установлена: ' + r);
    });

    faucetGive.addEventListener('click', ()=>{
      const add = 0.01; setBalance(getBalance() + add); render(); log('Faucet выдал ' + add + ' DEMO (локально).');
    });

    // Инициализация
    if(!localStorage.getItem(BAL_KEY)) setBalance(0);
    if(!localStorage.getItem('demo_rate')) localStorage.setItem('demo_rate', rateInput.value);
    walletInput.value = localStorage.getItem(ADDR_KEY) || '';
    render();
  </script>
</body>
</html>
